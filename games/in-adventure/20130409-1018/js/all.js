config.feedImageVersion="4";var stringConstants={CROWN_BRONZE:"bronze",CROWN_SILVER:"silver",CROWN_GOLD:"gold",SHARE_THREE_STARS_TITLE:"Angry Birds in Ultrabook™ Adventure",SHARE_THREE_STARS_LINE1:"I just beat %1 with %2 and got three stars.",SHARE_THREE_STARS_LINE2:"Click now to beat my score!",SHARE_CROWN_TITLE:"Angry Birds in Ultrabook™ Adventure",SHARE_CROWN_LINE1:"I just beat %2 with %3 points and won a %1 crown.",SHARE_CROWN_LINE2:"Click now to beat my score!",SHARE_TOURNAMENT_1ST_TITLE:"Gold Standard!",SHARE_TOURNAMENT_1ST_LINE1:"I got %1 points and beat all my friends in the Angry Birds Friends Weekly Tournament.",SHARE_TOURNAMENT_1ST_LINE2:"Think you can beat me in the next tournament?",SHARE_TOURNAMENT_2ND_TITLE:"Silver Bullet!",SHARE_TOURNAMENT_2ND_LINE1:"I took second place in the Angry Birds Friends Weekly Tournament with %1 points.",SHARE_TOURNAMENT_2ND_LINE2:"Come and challenge me in the next tournament!",SHARE_TOURNAMENT_3RD_TITLE:"Bronze Medalist!",SHARE_TOURNAMENT_3RD_LINE1:"I won the bronze trophy in the Angry Birds Friends Weekly Tournament with %1 points.",SHARE_TOURNAMENT_3RD_LINE2:"Come play with me in the next tournament!",SHARE_ME_TITLE:"Total destruction!",SHARE_ME_LINE1:"I just obliterated %1 with the Mighty Eagle.",SHARE_ME_LINE2:"Click play to try the level yourself!",SHARE_DEFAULT_TITLE:"Angry Birds in Ultrabook™ Adventure",SHARE_DEFAULT_LINE1:"I just %1 %2 with a score of %3!",SHARE_DEFAULT_LINE2:"Click now to beat my score!",SHARE_AVATAR_TITLE:"I made a new avatar!",INVITE_TITLE:"Select friends to invite",INVITE_MESSAGE:"Chirp! Come fling birds and pop cyber pigs in the Angry Birds in Ultrabook™ Adventure.",SEND_GIFTS_FRIEND_SELECTOR_TITLE:"Select friends to send mystery gifts to",SEND_GIFTS_SINGLE_TITLE:"Send a gift to your friend.",SEND_GIFTS_MESSAGE:"%1 just sent you a mystery gift. It may contain an amazing power up. Click to see if you've won one!",BRAG_TITLE:"Let your friends know you passed them",BRAG_MESSAGE:"I beat your high score in %1 in Angry Birds in Ultrabook™ Adventure! Think you can beat mine?"};var permissions={};function deleteAllRequests(){var a=getURLParameter("request_ids");if(a&&a!="null"){var b=a.split("%2C");$.each(b,function(){FB.api(this+"_"+config.userId,"delete",function(c){})})}}function updatePermissions(a){FB.api("/me/permissions",function(b){permissions=b.data[0];if(a){a()}})}function placeOrder(b){forcePause=true;var a={method:"pay",order_info:b,purchase_type:"item",dev_purchase_params:{oscif:true}};pauseGame();setTimeout(function(){FB.ui(a,orderCallback)},100)}function onUrl(a){document.getElementById("AngryBirdsFacebook").onUrl(a.path)}var widthToggle=true;var orderCallback=function(b){forcePause=false;onUIDialogClose();if(b.order_id&&b.status=="settled"){document.getElementById("AngryBirdsFacebook").purchaseComplete();var a="/orderinfo/"+b.order_id;$.get(a,function(c){},"json")}};function sharePhoto(a){pauseGame();FB.ui({method:"feed",link:"http://apps.facebook.com/"+config.appDomain,picture:"http://facebook.com/photo.php?fbid="+a,name:stringConstants.SHARE_AVATAR_TITLE,ref:"avatar"},onUIDialogClose)}function shareThreeStars(b,a,c){pauseGame();FB.ui({method:"stream.publish",user_message_prompt:"",message:"message",ref:"stars",attachment:{name:stringConstants.SHARE_THREE_STARS_TITLE.replace("%1",a),caption:stringConstants.SHARE_THREE_STARS_LINE1.replace("%1",a).replace("%2",c),description:stringConstants.SHARE_THREE_STARS_LINE2,href:"http://apps.facebook.com/"+config.appDomain+"/?levelId="+b+"&ref=stars",media:[{type:"flash",swfsrc:getEmbedUrl(c,b),imgsrc:config.serverRoot+"/fb_images/stars.png?v="+config.feedImageVersion,expanded_width:"398",expanded_height:"270"}]}},onShareUIDialogClose("stars",b))}function shareFeather(b,a){pauseGame();FB.ui({method:"stream.publish",user_message_prompt:"",message:"message",ref:"feather",attachment:{name:stringConstants.SHARE_ME_TITLE,caption:stringConstants.SHARE_ME_LINE1.replace("%1",a),description:stringConstants.SHARE_ME_LINE2,href:"http://apps.facebook.com/"+config.appDomain+"/?levelId="+b+"&ref=feather",media:[{type:"flash",swfsrc:getEmbedUrl(0,b),imgsrc:config.serverRoot+"/fb_images/me.png?v="+config.feedImageVersion,expanded_width:"398",expanded_height:"270"}]}},onShareUIDialogClose("me",b))}function shareDefault(b,a,d,c){pauseGame();FB.ui({method:"stream.publish",user_message_prompt:"",message:"message",ref:"play",attachment:{name:stringConstants.SHARE_DEFAULT_TITLE,caption:stringConstants.SHARE_DEFAULT_LINE1.replace("%1",(c?"beat":"played")).replace("%2",a).replace("%3",d),description:stringConstants.SHARE_DEFAULT_LINE2,href:"http://apps.facebook.com/"+config.appDomain+"/?levelId="+b+"&ref=play",media:[{type:"flash",swfsrc:getEmbedUrl(d,b),imgsrc:config.serverRoot+"/fb_images/default.png?v="+config.feedImageVersion,expanded_width:"398",expanded_height:"270"}]}},onShareUIDialogClose(c?"win":"lose",b))}function shareCrown(c,b,e,d){if(e>=1&&e<=3){var a=[stringConstants.CROWN_GOLD,stringConstants.CROWN_SILVER,stringConstants.CROWN_BRONZE][e-1];pauseGame();FB.ui({method:"stream.publish",user_message_prompt:"",message:"message",ref:"crown",attachment:{name:stringConstants.SHARE_CROWN_TITLE,caption:stringConstants.SHARE_CROWN_LINE1.replace("%1",a).replace("%2",b).replace("%3",d),description:stringConstants.SHARE_CROWN_LINE2,href:"http://apps.facebook.com/"+config.appDomain+"/?levelId="+c+"&ref=crown",media:[{type:"flash",swfsrc:getEmbedUrl(d,c),imgsrc:config.serverRoot+"/fb_images/crown.png?v="+config.feedImageVersion,expanded_width:"398",expanded_height:"270"}]}},onShareUIDialogClose("crown",c))}}function onShareUIDialogClose(a,b){return function(c){if(c){trackEvent10Percent("share",a,b)}onUIDialogClose(c)}}function shareTournamentRank(d,b){pauseGame();var c,e,a;switch(d){case"1st":c=stringConstants.SHARE_TOURNAMENT_1ST_TITLE;e=stringConstants.SHARE_TOURNAMENT_1ST_LINE1;a=stringConstants.SHARE_TOURNAMENT_1ST_LINE2;break;case"2nd":c=stringConstants.SHARE_TOURNAMENT_2ND_TITLE;e=stringConstants.SHARE_TOURNAMENT_2ND_LINE1;a=stringConstants.SHARE_TOURNAMENT_2ND_LINE2;break;case"3rd":c=stringConstants.SHARE_TOURNAMENT_3RD_TITLE;e=stringConstants.SHARE_TOURNAMENT_3RD_LINE1;a=stringConstants.SHARE_TOURNAMENT_3RD_LINE2;break}FB.ui({method:"feed",link:"http://apps.facebook.com/"+config.appDomain+"/?ref=tournament",picture:config.serverRoot+"/fb_images/tournament"+d+".png?v="+config.feedImageVersion,name:c,caption:e.replace("%1",b),description:a,ref:"tournament"},onUIDialogClose)}function getEmbedUrl(c,a){var b=config.serverRoot.substr(0,7)=="http://"?"https://"+config.serverRoot.substr(7):config.serverRoot;return b+"/flash_embed/AngryBirdsEmbed.swf?assetsUrl="+b+"/flash_embed/&score="+c+"&levelId="+a}function flashInviteFriendsHandler(a){var b={method:"apprequests",filters:["app_non_users"],title:stringConstants.INVITE_TITLE,message:stringConstants.INVITE_MESSAGE};if(a){b.to=a}pauseGame();FB.ui(b,onInvitationDialogClose)}function onInvitationDialogClose(a){onUIDialogClose(a);if(a&&a.to){var b="/invitationsent/"+encodeURIComponent(a.to);$.get(b);trackEvent1Percent("invite","invitation-sent",null,0)}else{}}function flashSendGiftToFriends(b,a){pauseGame();FB.ui({method:"apprequests",exclude_ids:a,title:stringConstants.SEND_GIFTS_FRIEND_SELECTOR_TITLE,message:stringConstants.SEND_GIFTS_MESSAGE.replace("%1",b)},onGiftSent)}function flashSendGiftFriend(b,a){pauseGame();FB.ui({method:"apprequests",to:a,title:stringConstants.SEND_GIFTS_SINGLE_TITLE,message:stringConstants.SEND_GIFTS_MESSAGE.replace("%1",b)},onGiftSent)}function onGiftSent(a){onUIDialogClose(a);if(a!==undefined&&a.request!==undefined){document.getElementById("AngryBirdsFacebook").giftsSentToUsers(a.to);var b="/giftrequestsent/"+a.request+"/"+encodeURIComponent(a.to);$.get(b);trackEvent1Percent("gift","gift-sent",null,0)}}function flashBrag(a,c,b){pauseGame();FB.ui({method:"apprequests",to:a,title:stringConstants.BRAG_TITLE,message:stringConstants.BRAG_MESSAGE.replace("%1",b)},function(d){onUIDialogClose(d);if(d!==undefined&&d.request!==undefined){var e="/bragrequestsent/"+d.request+"/"+c+"/"+encodeURIComponent(d.to);$.get(e)}})}function askForPublishStreamPermission(){if(permissions.publish_stream){document.getElementById("AngryBirdsFacebook").permissionRequestComplete("true")}else{FB.login(function(a){updatePermissions(function(){if(permissions.publish_stream){document.getElementById("AngryBirdsFacebook").permissionRequestComplete("true")}else{document.getElementById("AngryBirdsFacebook").permissionRequestComplete("false")}})},{scope:"publish_stream"})}}function flashDeleteRequest(a){FB.api(a,"delete",function(b){})}function login(a){postLogin()}function onUIDialogClose(a){resumeGame()}function requestAuthorization(){window.location.replace("/fbauth/authRequest"+window.location.search)}function logout(){window.location.replace("/logout")};
var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-23082676-25"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();var sample1Percent=Math.random();var sample10Percent=Math.random();function trackEvent10Percent(a,c,b,d){if(sample10Percent<=0.1){trackEvent(a,c+" x 10",b,d)}}function trackEvent1Percent(a,c,b,d){if(sample1Percent<=0.01){trackEvent(a,c+" x 100",b,d)}}function trackEvent(a,c,b,d){if(a==null){return}if(c==null){c=""}if(b==null){b=""}if(d==null){_gaq.push(["_trackEvent",a,c,b])}else{_gaq.push(["_trackEvent",a,c,b,d])}};
FB.init({appId:config.appId,channelURL:config.channelURL,status:true,cookie:false,oauth:true,xfbml:true,frictionlessRequests:true,hideFlashCallback:onFbVisibilityUpdate});FB.getLoginStatus(function(a){if(a.status==="connected"){config.accessToken=a.authResponse.accessToken;config.userId=a.authResponse.userID;config.tokenExpiresIn=a.authResponse.expiresIn;login(a)}else{if(a.status==="not_authorized"){requestAuthorization()}else{logout()}}});FB.Canvas.setSize();
$(document).ready(function(b){var c=function(d){if(!d){d=window.event}if(d.stopPropagation){d.stopPropagation()}if(d.preventDefault){d.preventDefault()}d.returnValue=false};var a=$("#flashContent")[0];if(a){if(a.addEventListener){a.addEventListener("mousewheel",c,false);a.addEventListener("DOMMouseScroll",c,false)}else{if(a.attachEvent){a.attachEvent("onmousewheel",c)}}}});
var pausePending=false;var gameIsPaused=false;var forcePause=false;var alreadyTracked=false;function onFlashLoadComplete(){FB.Canvas.setDoneLoading()}function onFbVisibilityUpdate(a){if(a.state=="opened"){pauseGame()}else{resumeGame()}}function getURLParameter(a){return decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function pauseGame(){if(pausePending||gameIsPaused){return}pausePending=true;gameIsPaused=true;document.getElementById("AngryBirdsFacebook").pause();document.getElementById("screenshot").style.display="none";document.getElementById("flashContent").style.top="-10000px";document.getElementById("imageContent").style.top="";document.getElementById("pauseLoading").style.display=""}function flashScreenshotReadyHandler(c){if(pausePending){pausePending=false}else{return}var e=document.getElementById("imageContent");var a=document.getElementById("flashContent");var b=document.getElementById("screenshot");document.getElementById("pauseLoading").style.display="none";var d="data:image/jpeg;base64,"+c;b.src=d.toString();b.style.display=""}function resumeGame(){if(!gameIsPaused||forcePause){return}document.getElementById("flashContent").style.top="";document.getElementById("imageContent").style.top="-10000px";document.getElementById("screenshot").style.display="none";document.getElementById("AngryBirdsFacebook").resume();pausePending=false;gameIsPaused=false}function flashRequestPauseHandler(){pauseGame()}function loadMainClient(c){var d={allowScriptAccess:"always",wmode:"direct",allowFullScreen:"true",bgcolor:"#000000"};var b={id:"AngryBirdsFacebook",name:"AngryBirdsFacebook"};var a={assetsUrl:config.assetsUrl,serverVersion:config.serverVersion,serverRoot:config.serverRoot,accessToken:config.accessToken,userId:config.userId,tokenExpiresIn:config.tokenExpiresIn};if(config.levelId){a.levelId=config.levelId}c.embedSWF(config.assetsUrl+"AngryBirdsIntelUltraBook.swf","flashHolder","100%","570","11.0.0",config.assetsUrl+"playerProductInstall.swf",a,d,b);c.createCSS("#flashHolder","display: block;");document.getElementById("imageContent").style.top="-10000px";document.getElementById("imageContent").style.display="block";trackEvent10Percent("flash","embed")}function postLogin(){var b=getURLParameter("request_ids");if(b&&b!="null"){var d=b.split("%2C");if(d.length==1){var c=b+"_"+config.userId;var a="https://graph.facebook.com/"+c+"?access_token="+config.accessToken;$.get(a,null,"json").complete(function(e){config.levelId=e.data;loadMainClient(swfobject);deleteAllRequests();updatePermissions()})}else{loadMainClient(swfobject);deleteAllRequests();updatePermissions()}}else{loadMainClient(swfobject);updatePermissions()}}function flashGetAccessToken(){return config.accessToken}function flashGetUserId(){return config.userId}function playClicked(){doPixelTrack()}function doPixelTrack(){if(alreadyTracked){return}alreadyTracked=true;var a=document.createElement("img");a.width=a.height=1;a.src="https://47.xg4ken.com/media/redir.php?track=1&token=03528881-38a4-4bc5-809d-4787b7060aad&type=game_played&val=0.0&orderId=&promoCode=&valueCurrency=USD";document.body.appendChild(a)};
(function(){if(window.SWFWheel){return}var c=window,b=document,d=navigator;var a=window.SWFWheel=function(e){this.setUp(e);if(a.browser.msie){this.bind4msie()}else{this.bind()}};a.prototype={setUp:function(f){var e=a.retrieveObject(f);if(e.nodeName.toLowerCase()=="embed"||a.browser.safari){e=e.parentNode}this.target=e;this.eventType=a.browser.mozilla?"DOMMouseScroll":"mousewheel"},bind:function(){this.target.addEventListener(this.eventType,function(e){var h,g,i=0;if(/XPCNativeWrapper/.test(e.toString())){var f=e.target.getAttribute("id")||e.target.getAttribute("name");if(!f){return}h=a.retrieveObject(f)}else{h=e.target}g=h.nodeName.toLowerCase();if(g!="object"&&g!="embed"){return}if(!h.checkBrowserScroll()){e.preventDefault();e.returnValue=false}if(!h.triggerMouseEvent){return}switch(true){case a.browser.mozilla:i=-e.detail;break;case a.browser.opera:i=e.wheelDelta/40;break;default:i=e.wheelDelta/80;break}h.triggerMouseEvent(i,e.ctrlKey,e.altKey,e.shiftKey)},false)},bind4msie:function(){var g,e,f=this.target;g=function(){var h=c.event,j=0,i=h.srcElement.nodeName.toLowerCase();if(i!="object"&&i!="embed"){return}if(!f.checkBrowserScroll()){h.returnValue=false}if(!f.triggerMouseEvent){return}j=h.wheelDelta/40;f.triggerMouseEvent(j,h.ctrlKey,h.altKey,h.shiftKey)};e=function(){f.detachEvent("onmousewheel",g);c.detachEvent("onunload",e)};f.attachEvent("onmousewheel",g);c.attachEvent("onunload",e)}};a.browser=(function(){var h=d.userAgent.toLowerCase(),i=d.platform.toLowerCase(),f,j=[0,0,0];if(d.plugins&&d.plugins["Shockwave Flash"]){f=d.plugins["Shockwave Flash"].description.replace(/^.*\\s+(\\S+\\s+\\S+$)/,"$1");j[0]=parseInt(f.replace(/^(.*)\\..*$/,"$1"),10);j[1]=parseInt(f.replace(/^.*\\.(.*)\\s.*$/,"$1"),10);j[2]=/[a-z-A-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else{if(c.ActiveXObject){try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(g){f=g.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");j[0]=parseInt(f[0],10);j[1]=parseInt(f[1],10);j[2]=parseInt(f[2],10)}}}catch(k){}}}return{win:i?/win/.test(i):/win/.test(h),mac:i?/mac/.test(i):/mac/.test(h),playerVersion:j,version:(h.match(/.+(?:rv|it|ra|ie)[\/:\\s]([\\d.]+)/)||[0,"0"])[1],chrome:/chrome/.test(h),stainless:/stainless/.test(h),safari:/webkit/.test(h)&&!/(chrome|stainless)/.test(h),opera:/opera/.test(h),msie:/msie/.test(h)&&!/opera/.test(h),mozilla:/mozilla/.test(h)&&!/(compatible|webkit)/.test(h)}})();a.join=function(f){var e=setInterval(function(){if(a.retrieveObject(f)){clearInterval(e);new a(f)}},0)};a.getState=function(f){var s=2,o=1,t=0,r=a.browser,q=r.playerVersion;if(r.mac){if(q[0]>=10&&q[1]>=1){if(r.safari||r.stainless){return t}else{if(r.chrome){return o}else{return s}}}else{return s}}if(!(q[0]>=10&&q[1]>=1)&&a.browser.safari){return s}var h=a.retrieveObject(f),e=h.nodeName.toLowerCase(),g="";if(e=="object"){var m,j,l=h.getElementsByTagName("param"),p=l.length;for(var n=0;n<p;n++){j=l[n];if(j.parentNode!=h){continue}m=j.getAttribute("name");g=j.getAttribute("value")||"";if(/wmode/i.test(m)){break}}}else{if(e=="embed"){g=h.getAttribute("wmode")||""}}if(r.msie){if(/transparent/i.test(g)){return s}else{if(/opaque/i.test(g)){return o}else{return t}}}else{if(/opaque|transparent/i.test(g)){return s}else{return t}}};a.retrieveObject=function(j){var h=b.getElementById(j);if(!h){var f=b.getElementsByTagName("embed"),e=f.length;for(var g=0;g<e;g++){if(f[g].getAttribute("name")==j){h=f[g];break}}}return h}})();
